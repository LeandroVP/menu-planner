<ion-content class="ion-padding">
	<ion-button
		id="open-modal"
		expand="block"
	>
		{{ 'form.item.createItem' | translate }}
	</ion-button>
	<ion-modal
		trigger="open-modal"
		(willDismiss)="onWillDismiss($event)"
	>
		<ng-template>
			<ion-header>
				<ion-toolbar>
					<ion-buttons slot="start">
						<ion-button (click)="cancel()">
							<ion-icon
								slot="icon-only"
								name="arrow-back"
								size="large"
							></ion-icon>
						</ion-button>
					</ion-buttons>
					<ion-title>{{ 'form.item.createItem' | translate }}</ion-title>
				</ion-toolbar>
			</ion-header>

			<ion-content class="ion-padding">
				<form
					[formGroup]="form"
					(ngSubmit)="confirm()"
				>
					<div class="content">
						<ion-item>
							<ion-input
								formControlName="name"
								label-placement="floating"
								[label]="'form.item.name' | translate"
							></ion-input>
						</ion-item>

						<ion-item>
							<ion-input
								(keyup.enter)="addTag(tagInput.value?.toString()); tagInput.value = ''"
								#tagInput
								label-placement="floating"
								[label]="'form.item.tag' | translate"
							></ion-input>
							<ion-button
								#tagAddButton
								class="add-button"
								fill="clear"
								shape="round"
								(click)="addTag(tagInput.value?.toString()); tagInput.value = ''"
							>
								<ion-icon
									slot="icon-only"
									name="add-circle-outline"
									size="large"
								></ion-icon>
							</ion-button>
						</ion-item>

						<ion-list *ngIf="tags.controls.length !== 0; else noTags">
							<ion-chip *ngFor="let tag of tags.controls; let i = index">
								<ion-label>{{ tag.value }}</ion-label>
								<ion-icon
									name="close-circle"
									(click)="removeTag(i)"
								></ion-icon>
							</ion-chip>
						</ion-list>

						<ng-template #noTags>
							<p>
								{{ 'form.item.noTags' | translate }}
							</p>
						</ng-template>
					</div>

					<ion-button
						type="submit"
						[disabled]="!form.valid"
						expand="full"
					>
						{{ 'form.item.save' | translate }}
					</ion-button>
				</form>
			</ion-content>
		</ng-template>
	</ion-modal>
</ion-content>
